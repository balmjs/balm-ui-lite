(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"V/ix":function(t,e,i){"use strict";i.r(e);var s=i("o0o1"),n=i.n(s),a=i("yXPU"),o=i.n(a),r={mixins:[i("HRpM").a],metaInfo:{titleTemplate:"%s - <ui-file>"},data:function(){return{files1:[],files2:[],files3:[],files4:[],postUrl:"https://jsonplaceholder.typicode.com/posts",limit:5}},methods:{onChange3:function(t){var e=this;t.length>this.limit-this.files3.length?this.$toast("\u56fe\u7247\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7".concat(this.limit,"\u5f20\uff01")):t.forEach(function(t){t.uploaded=!1,e.files3.push(t)})},onChange4:function(t){var e=this;t.forEach(function(t){t.state="beforeUpload",t.progress=0,t.request=null,e.files4.push(t)})},upload:function(){var t=o()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.post(this.postUrl,{file:e.sourceFile});case 3:t.sent.data?(e.uploaded=!0,this.$notify.add({content:"".concat(e.name,"\u4e0a\u4f20\u6210\u529f\uff01")})):this.$notify.add({content:"".concat(e.name,"\u4e0a\u4f20\u5931\u8d25\uff01")}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.$notify.add({content:"".concat(e.name,"\u4e0a\u4f20\u5931\u8d25\uff01")});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),uploadWithProgress:function(t){var e=this;if("beforeUpload"===t.state){t.state="progress";var i=new FormData;i.append("file",t.sourceFile),t.request=new XMLHttpRequest,t.request.onload=function(){JSON.parse(t.request.response)&&(e.$notify.add({content:"".concat(t.name,"\u4e0a\u4f20\u6210\u529f\uff01")}),t.state="uploaded")},t.request.onerror=function(){t.state="beforeUpload",t.progress=0,e.$notify.add({content:"".concat(t.name,"\u4e0a\u4f20\u5931\u8d25\uff01")})},t.request.onabort=function(){t.state="beforeUpload",t.progress=0,e.$notify.add({content:"\u5df2\u53d6\u6d88\u4e86".concat(t.name,"\u7684\u4e0a\u4f20\u3002")})},t.request.upload.onprogress=function(e){e.total>0&&(t.progress=e.loaded/e.total*100)},t.request.open("post",this.postUrl,!0),t.request.send(i)}},uploadAllFilesWithProgress:function(){var t=this;this.files4.forEach(function(e){t.uploadWithProgress(e)})},abort:function(t){t.request.abort()},uploadAllFiles:function(){var t=this;this.files3.forEach(function(e){t.upload(e)})},remove:function(t,e){this[t].splice(e,1)},setBg:function(t){var e=t.previewSrc;return e?{backgroundImage:"url(".concat(e,")")}:{}}},created:function(){this.showCode("file",4)}},l=i("KHd+"),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page--file"},[t._m(0),t._v(" "),i("h4",[t._v("\u6982\u8ff0")]),t._v(" "),t._m(1),t._v(" "),i("p",[t._v("\u5728\u5f04\u6e05\u695a\u6574\u4e2a\u7ec4\u4ef6\u7684\u5b9e\u9645\u4f5c\u7528\u4e4b\u540e\uff0c\u6211\u4eec\u5220\u9664\u4e86\u5927\u90e8\u5206\u529f\u80fd\uff0c\u53ea\u628a\u6700\u6838\u5fc3\u7684\u90e8\u5206\u4fdd\u7559\u4e86\u4e0b\u6765\uff0c\u914d\u7f6e\u53c2\u6570\u51cf\u5c11\u5230\u4e863\u4e2a\uff0c\u800c\u4e14\u53ea\u6709\u4e00\u4e2a\u4e8b\u4ef6\u548c\u4e00\u4e2a\u9ed8\u8ba4\u63d2\u69fd\uff0c\u6211\u4eec\u89c9\u5f97\u6574\u4e2a\u7ec4\u4ef6\u53d8\u5f97\u975e\u5e38\u7075\u6d3b\u3002")]),t._v(" "),i("h4",[t._v("\u5f15\u5165")]),t._v(" "),i("ui-markdown",{attrs:{text:t.code[0]}}),t._v(" "),i("h4",[t._v("\u7528\u6cd5")]),t._v(" "),i("h6",[t._v("1.\u57fa\u672c\u7528\u6cd5(\u5355\u9009 + \u6587\u4ef6\u7c7b\u578b\u9650\u5b9a)")]),t._v(" "),i("p",[i("ui-file",{attrs:{accept:"image/*"},on:{change:function(e){return t.balmUI.onChange("files1",e)}}})],1),t._v(" "),i("p",[t._v("\u4f60\u9009\u62e9\u7684\u6587\u4ef6:")]),t._v(" "),t.files1.length?i("div",[t._v("\n    "+t._s(t.files1)+"\n  ")]):t._e(),t._v(" "),i("ui-accordion",[i("ui-markdown",{attrs:{code:t.code[1]}})],1),t._v(" "),i("h6",[t._v("2.\u591a\u9009 + \u6587\u4ef6\u7c7b\u578b\u9650\u5b9a + \u56fe\u7247\u9884\u89c8")]),t._v(" "),i("p",[i("ui-file",{attrs:{preview:"",multiple:"",accept:"image/*"},on:{change:function(e){return t.balmUI.onChange("files2",e)}}})],1),t._v(" "),i("transition-group",{staticClass:"preview-list",attrs:{name:"list",tag:"ul"}},t._l(t.files2,function(e,s){return i("li",{key:e.uid,staticClass:"item"},[i("div",{staticClass:"inner"},[i("span",{staticClass:"preview",style:t.setBg(e)}),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.name))])])])}),0),t._v(" "),i("ui-accordion",[i("ui-markdown",{attrs:{text:t.code[2]}})],1),t._v(" "),i("h6",[t._v("3.\u7ecf\u5178\u591a\u56fe\u4e0a\u4f20")]),t._v(" "),i("transition-group",{staticClass:"preview-list",attrs:{name:"list",tag:"ul"}},[t._l(t.files3,function(e,s){return i("li",{key:e.uid,staticClass:"item"},[i("div",{staticClass:"inner"},[i("span",{staticClass:"preview",style:t.setBg(e)}),t._v(" "),i("span",{staticClass:"actions"},[e.uploaded?t._e():i("ui-button",{attrs:{raised:"",colored:"",icon:"file_upload"},on:{click:function(i){return t.upload(e)}}}),t._v(" "),i("ui-button",{attrs:{raised:"",icon:"delete"},on:{click:function(e){return t.remove("files3",s)}}})],1)])])}),t._v(" "),t.files3.length<t.limit?i("li",{key:"add",staticClass:"item add-btn"},[i("div",{staticClass:"inner"},[i("ui-file",{attrs:{preview:"",multiple:"",accept:"image/*"},on:{change:t.onChange3}},[i("ui-icon",{staticClass:"add-icon"},[t._v("add")])],1)],1)]):t._e()],2),t._v(" "),i("p",[i("ui-button",{attrs:{raised:"",colored:""},on:{click:t.uploadAllFiles}},[i("ui-icon",[t._v("file_upload")]),t._v("\n      \u5168\u90e8\u4e0a\u4f20\n    ")],1)],1),t._v(" "),i("ui-accordion",[i("ui-markdown",{attrs:{text:t.code[3]}})],1),t._v(" "),i("h6",[t._v("4.\u4e0a\u4f20\u5e26\u8fdb\u5ea6\u6761")]),t._v(" "),i("p",[i("ui-file",{attrs:{preview:"",multiple:""},on:{change:t.onChange4}})],1),t._v(" "),i("ul",{staticClass:"file-list"},t._l(t.files4,function(e,s){return i("li",{staticClass:"item"},[i("transition",{attrs:{name:"flip"}},["progress"===e.state?i("div",{key:"progress",staticClass:"progress"},[i("ui-progress",{attrs:{progress:e.progress}}),t._v(" "),i("ui-button",{attrs:{raised:"",icon:"stop"},on:{click:function(i){return t.abort(e)}}})],1):i("div",{key:"info",staticClass:"file-info"},[i("div",{staticClass:"info"},[i("ui-icon",{staticClass:"file-icon"},[t._v("attach_file")]),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.name))])],1),t._v(" "),i("div",{staticClass:"actions"},["beforeUpload"===e.state?i("ui-button",{attrs:{raised:"",colored:"",icon:"file_upload"},on:{click:function(i){return t.uploadWithProgress(e)}}}):t._e(),t._v(" "),i("ui-button",{attrs:{raised:"",icon:"delete"},on:{click:function(e){return t.remove("files4",s)}}})],1)])])],1)}),0),t._v(" "),i("p",[i("ui-button",{attrs:{raised:"",colored:""},on:{click:t.uploadAllFilesWithProgress}},[i("ui-icon",[t._v("file_upload")]),t._v("\n      \u5168\u90e8\u4e0a\u4f20\n    ")],1)],1),t._v(" "),i("ui-accordion",[i("ui-markdown",{attrs:{text:t.code[4]}})],1),t._v(" "),i("h4",[t._v("\u8865\u5145\u8bf4\u660e")]),t._v(" "),i("p",[t._v("\u4e0a\u9762\u7684\u4f8b\u5b50\u8868\u660e\uff0c\u4f60\u53ef\u4ee5\u4ece\u7ec4\u4ef6\u7684change\u4e8b\u4ef6\u5904\u7406\u65b9\u6cd5\u7684\u53c2\u6570\u4e2d\u83b7\u5f97\u4e00\u4e2a\u6587\u4ef6\u6570\u7ec4\uff0c\u8fd9\u662f\u5bf9\u539f\u751fFileList\u5bf9\u8c61\u7684\u5305\u88c5\u3002\u6570\u7ec4\u7684\u6bcf\u9879\u90fd\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\uff1a")]),t._v(" "),i("ui-apidoc",{attrs:{name:"file-arguments-props","show-title":!1}}),t._v(" "),i("h6",[t._v("\u5f53\u7ec4\u4ef6\u8bbe\u7f6epreview\u65f6\uff0c\u7ec4\u4ef6\u5185\u90e8\u4f18\u5148\u4f7f\u7528URL.createObjectURL\u65b9\u6cd5\u751f\u6210Blob url\uff0c\u5982\u679c\u4e0d\u652f\u6301\u5219\u4f7f\u7528FileReader\u5bf9\u8c61\u7684readAsDataURL\u65b9\u6cd5\u83b7\u53d6base64\u3002\u5982\u679c\u4f60\u7684\u6d4f\u89c8\u5668\u652f\u6301Blob url\uff0c\u5f53\u4f60\u4e0d\u518d\u9700\u8981\u67d0\u4e2a\u9884\u89c8\u7684\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528URL.revokeObjectURL\u65b9\u6cd5\u53d6\u6d88\u6d4f\u89c8\u5668\u5bf9\u8be5\u6587\u4ef6\u7684\u5f15\u7528\u3002")]),t._v(" "),i("p",[t._v("\u4e0b\u9762\u662f\u7ec4\u4ef6\u7684api\u8bf4\u660e\uff1a")]),t._v(" "),i("ui-apidoc",{attrs:{name:"file"}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"component-title"},[e("h2",[this._v("File \u6587\u4ef6\u5904\u7406")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\u8fd9\u4e2a\u7ec4\u4ef6\u6700\u5f00\u59cb\u53eb\u505afile-upload\uff0c\u56e0\u4e3a\u6211\u4eec\u628a\u4e0a\u4f20\u529f\u80fd\u5305\u542b\u4e86\u8fdb\u53bb\u3002\u6211\u4eec\u8fd8\u6839\u636e\u5e38\u7528\u7684\u4e1a\u52a1\u5206\u4e3a\u666e\u901a\u6587\u4ef6\u4e0a\u4f20\uff0c\u5934\u50cf\u4e0a\u4f20\u3001\u662f\u5426\u9700\u8981\u9884\u89c8\u7b49\u51e0\u79cd\u60c5\u51b5\uff0c\u4f46\u662f\u968f\u7740\u914d\u7f6e\u5c5e\u6027\u4e2a\u6570\uff0820+\uff09\u3001\u629b\u51fa\u7684\u4e8b\u4ef6\uff088\u79cd\uff09\u548c\u754c\u9762\u7279\u6027\uff081\u4e2a\u9ed8\u8ba4\u63d2\u69fd + 3\u4e2a\u5177\u540d\u63d2\u69fd\uff09\u7684\u4e0d\u65ad\u589e\u52a0\uff0c\u6211\u4eec\u5f00\u59cb\u53cd\u601d\uff1a"),e("strong",[this._v("\u7ec4\u4ef6\u7684\u610f\u4e49\u662f\u4ec0\u4e48\uff1f")]),this._v("\u4e1a\u52a1\u662f\u4e0d\u53ef\u80fd\u5168\u90e8\u6db5\u76d6\u7684\uff0c\u5c24\u5176\u662f\u754c\u9762\uff0c\u53ea\u9700\u8981\u4ea7\u54c1\u7ecf\u7406\u4e00\u53e5\u8bdd\u5c31\u80fd\u5168\u76d8\u5426\u5b9a\uff0c\u90a3\u4e48\u4e3a\u4ec0\u4e48\u6211\u4eec\u8981\u5f00\u53d1\u4e00\u4e2a\u51e0\u767e\u884c\u4ee3\u7801\u53c8\u6ca1\u4ec0\u4e48\u6269\u5c55\u6027\u7684\u7ec4\u4ef6\uff1f\u96be\u9053\u6709\u8c01\u613f\u610f\u5728\u4e00\u5806\u914d\u7f6e\u53c2\u6570\u4e2d\u7ffb\u6765\u8986\u53bb\u601d\u8003\u5b83\u4eec\u7684\u7528\u6cd5\uff0c\u6216\u8005\u4e3a\u6ee1\u8db3\u9700\u6c42\u91cd\u5199\u51e0\u5341\u884c\u6837\u5f0f\uff1f")])}],!1,null,null,null);e.default=c.exports}}]);